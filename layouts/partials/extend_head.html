{{/* Улучшенная темная тема - DevOps Way Blog */}}

{{/* Meta теги для темы */}}
<meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#0f172a" media="(prefers-color-scheme: dark)">

{{/* Предзагрузка шрифтов для лучшей производительности */}}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

{{/* Подключаем наши улучшенные скрипты */}}
{{ $themeToggle := resources.Get "js/theme-toggle.js" | resources.Minify }}
{{ $codeCopy := resources.Get "js/code-copy.js" | resources.Minify }}

<script>
// Устанавливаем тему до загрузки страницы для предотвращения мигания
(function() {
  const savedTheme = localStorage.getItem('pref-theme') || 'auto';
  const getSystemTheme = () => window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
  const effectiveTheme = savedTheme === 'auto' ? getSystemTheme() : savedTheme;
  
  document.documentElement.setAttribute('data-theme', effectiveTheme);
  document.body.classList.add(effectiveTheme);
})();
</script>

<script defer src="{{ $themeToggle.RelPermalink }}"></script>
<script defer src="{{ $codeCopy.RelPermalink }}"></script>

{{/* Structured Data для лучшего SEO */}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Blog",
  "name": "{{ .Site.Title }}",
  "description": "{{ .Site.Params.description }}",
  "url": "{{ .Site.BaseURL }}",
  "author": {
    "@type": "Person",
    "name": "{{ .Site.Params.author }}"
  },
  "inLanguage": "ru-RU"
}
</script>

{{/* Дополнительные мета-теги для PWA */}}
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="mobile-web-app-capable" content="yes">
