<!-- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –±–µ–∑ –æ—à–∏–±–æ–∫ -->
<meta name="robots" content="index, follow">
<link rel="canonical" href="{{ .Permalink }}">

<!-- –í—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–æ–≤ —Å—Ç—Ä–æ–∫ -->
<script>
(function() {
    function hideLineNumbers() {
        document.querySelectorAll('.lnt, .lnl').forEach(el => {
            el.style.display = 'none';
            el.style.userSelect = 'none';
        });
    }
    document.addEventListener('DOMContentLoaded', hideLineNumbers);
    setTimeout(hideLineNumbers, 100);
})();
</script>
<!-- –î–æ–±–∞–≤–∏—Ç—å –í –ö–û–ù–ï–¶ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ñ–∞–π–ª–∞ layouts/partials/extend_head.html -->

<!-- Mermaid.js –¥–ª—è –¥–∏–∞–≥—Ä–∞–º–º -->
<script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    mermaid.initialize({
        startOnLoad: true,
        theme: document.body.classList.contains('dark') ? 'dark' : 'default',
        securityLevel: 'loose',
        fontFamily: 'inherit',
        flowchart: {
            useMaxWidth: true,
            htmlLabels: true
        }
    });
    
    // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã
    const themeToggle = document.getElementById('theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', () => {
            setTimeout(() => {
                const newTheme = document.body.classList.contains('dark') ? 'dark' : 'default';
                mermaid.initialize({ theme: newTheme });
                // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –¥–∏–∞–≥—Ä–∞–º–º—ã
                document.querySelectorAll('.mermaid').forEach(el => {
                    if (el.getAttribute('data-processed')) {
                        el.removeAttribute('data-processed');
                        const graph = el.innerHTML;
                        el.innerHTML = el.textContent || el.innerText;
                    }
                });
                mermaid.init();
            }, 100);
        });
    }
});
</script>

<!-- –°—Ç–∏–ª–∏ –¥–ª—è Mermaid -->
<style>
.mermaid {
    text-align: center;
    margin: 2rem 0;
    background: transparent;
}

.mermaid svg {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
}

.post-content .mermaid {
    overflow-x: auto;
    padding: 1rem;
    border: 1px solid var(--border);
    border-radius: 8px;
    background: var(--code-bg);
}

@media (max-width: 768px) {
    .mermaid {
        font-size: 14px;
    }
}
</style>
{{/* –î–∏–∞–≥—Ä–∞–º–º—ã: —É—Å–ª–æ–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ CSS */}}
{{- $needsDiagrams := false -}}
{{- if or .Params.diagrams 
          (findRE `{{<\s*diagram\s` .RawContent)
          (findRE `{{<\s*mermaid-enhanced\s` .RawContent)
          (findRE `{{<\s*risk-table\s` .RawContent) -}}
  {{- $needsDiagrams = true -}}
{{- end -}}

{{- if $needsDiagrams -}}
{{- $diagramCSS := resources.Get "css/extended/diagrams.css" -}}
{{- if $diagramCSS -}}
{{- $diagramCSS = $diagramCSS | minify | fingerprint -}}
<!-- –î–∏–∞–≥—Ä–∞–º–º—ã: CSS —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π -->
<link rel="preload" href="{{ $diagramCSS.RelPermalink }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="{{ $diagramCSS.RelPermalink }}"></noscript>
{{- end -}}

{{/* –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω—É–∂–µ–Ω –ª–∏ Mermaid */}}
{{- if or .Params.mermaid 
          (findRE `{{<\s*mermaid-enhanced\s` .RawContent) -}}
<!-- Mermaid: –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ -->
<link rel="preload" href="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js" as="script">
{{- end -}}

<!-- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π inline CSS –¥–ª—è –¥–∏–∞–≥—Ä–∞–º–º -->
<style>
.diagram-wrapper {
  min-height: 200px;
  background: #f0f0f0;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
}
.diagram-wrapper::before {
  content: "üìä –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∏–∞–≥—Ä–∞–º–º—ã...";
  color: #666;
  font-size: 0.9rem;
}
.diagram-wrapper.loaded::before {
  display: none;
}
[data-theme="dark"] .diagram-wrapper {
  background: #2a2a2a;
}
</style>
{{- end -}}