---
title: "üöÄ –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ç—É—Ä–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏"
description: "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π DevOps –≥–∞–π–¥ –ø–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∫–æ–Ω—Ç—É—Ä–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏ IT-—Å–∏—Å—Ç–µ–º. –û—Ç –±–∞–∑–æ–≤—ã—Ö 2-3 –∫–æ–Ω—Ç—É—Ä–æ–≤ –¥–æ enterprise 6+ —Å—Ä–µ–¥ —Å –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–º–∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º–∏ 2025 –≥–æ–¥–∞."
summary: "–ò—Å—á–µ—Ä–ø—ã–≤–∞—é—â–µ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –≤—ã–±–æ—Ä—É –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∫–æ–Ω—Ç—É—Ä–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º. –í–∫–ª—é—á–∞–µ—Ç –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã, troubleshooting, —á–µ–∫–ª–∏—Å—Ç—ã –∏ —Ä–µ–∞–ª—å–Ω—ã–µ –∫–µ–π—Å—ã –æ—Ç Netflix –¥–æ Goldman Sachs."
date: 2025-06-10T14:30:00+01:00
lastmod: 2025-06-10T14:30:00+01:00
draft: false
weight: 50
images: []
categories: ["DevOps", "Architecture", "Best Practices"]
tags: ["devops", "kubernetes", "gitops", "architecture", "containers", "ci-cd", "security", "monitoring", "infrastructure", "–∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å-—Å–∏—Å—Ç–µ–º", "–∫–æ–Ω—Ç—É—Ä—ã-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏", "–∏–∑–æ–ª—è—Ü–∏—è", "–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è"]
contributors: ["DevOps School"]
pinned: false
homepage: false
seo:
  title: "DevOps –≥–∞–π–¥: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ç—É—Ä–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø–æ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º"
  description: "–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é DevOps –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å —É—á–µ—Ç–æ–º –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ 2025, troubleshooting –∏ —á–µ–∫–ª–∏—Å—Ç—ã."
  canonical: ""
  noindex: false
toc: true
math: true
highlight: true
author: "DevOps School"
featured: true
difficulty: "beginner"
time_to_read: "25 –º–∏–Ω—É—Ç"
practical_examples: true
troubleshooting_included: true
technologies: ["Kubernetes", "Docker", "GitOps", "ArgoCD", "Terraform", "Istio", "Prometheus", "Grafana"]
audience: ["Junior DevOps", "DevOps Engineers", "Platform Engineers", "SRE"]
prerequisites: ["–ë–∞–∑–æ–≤—ã–µ –∑–Ω–∞–Ω–∏—è Linux", "–ü–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤", "–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã —Å Git"]
learning_outcomes:
  - "–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è IT-—Å–∏—Å—Ç–µ–º –ø–æ —É—Ä–æ–≤–Ω—é –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏"
  - "–í—ã–±–æ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–Ω—Ç—É—Ä–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏"
  - "–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏–∑–æ–ª—è—Ü–∏–∏ —Å—Ä–µ–¥"
  - "–í–Ω–µ–¥—Ä–µ–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö DevOps –ø—Ä–∞–∫—Ç–∏–∫ 2025 –≥–æ–¥–∞"
  - "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞"
  - "Troubleshooting —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º"
related_posts: ["kubernetes-best-practices", "gitops-implementation", "devops-security"]
series: "DevOps Architecture"
---

## üéØ –í–≤–µ–¥–µ–Ω–∏–µ

–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è IT-–∏–Ω–¥—É—Å—Ç—Ä–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —á–µ—Ç–∫—É—é –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç—å: **—Å —Ä–æ—Å—Ç–æ–º –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ç—É—Ä–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ**. –û—Ç –ø—Ä–æ—Å—Ç—ã—Ö 2-3 –∫–æ–Ω—Ç—É—Ä–æ–≤ –¥–ª—è –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –¥–æ —Å–ª–æ–∂–Ω—ã—Ö 6+ –∫–æ–Ω—Ç—É—Ä–æ–≤ –¥–ª—è safety-critical —Å–∏—Å—Ç–µ–º.

–í 2025 –≥–æ–¥—É —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ GitOps, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏ –∏ Infrastructure as Code —Å–¥–µ–ª–∞–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∫–æ–Ω—Ç—É—Ä–∞–º–∏ –¥–æ—Å—Ç—É–ø–Ω—ã–º –¥–∞–∂–µ –¥–ª—è —Å—Ä–µ–¥–Ω–∏—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ç—É—Ä–æ–≤ - —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ best practice, —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–π —Ñ–∞–∫—Ç–æ—Ä –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∏—Å–∫–æ–≤ –∏ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ—Å—Ç–∏ –±–∏–∑–Ω–µ—Å–∞.

### üîë –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–∫—Ç—ã

- Netflix —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–µ—Ç –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ **1000+ —Ä–∞–∑ –≤ –¥–µ–Ω—å**
- Goldman Sachs —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–ª –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –æ—Ç –æ–¥–Ω–æ–π —Å–±–æ—Ä–∫–∏ –∫–∞–∂–¥—ã–µ –¥–≤–µ –Ω–µ–¥–µ–ª–∏ –¥–æ **1000+ —Å–±–æ—Ä–æ–∫ –≤ –¥–µ–Ω—å**
- 67% –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –ø–ª–∞–Ω–∏—Ä—É—é—Ç –≤–Ω–µ–¥—Ä–∏—Ç—å GitOps –≤ –±–ª–∏–∂–∞–π—à–∏–π –≥–æ–¥

---

## üèóÔ∏è –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º

### üî¥ Safety-Critical Systems

**–û—Ç–∫–∞–∑ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–æ—Ç–µ—Ä–µ –∂–∏–∑–Ω–∏ –∏–ª–∏ —Å–µ—Ä—å–µ–∑–Ω–æ–º—É —É—â–µ—Ä–±—É**

- **–ü—Ä–∏–º–µ—Ä—ã**: –ê–≤–∏–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª–µ—Ç–æ–º, –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –∞–ø–ø–∞—Ä–∞—Ç—ã –∂–∏–∑–Ω–µ–æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è
- **–ö–æ–Ω—Ç—É—Ä—ã**: 6-8+ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ä–µ–¥
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: Certification environments, –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å—Ä–µ–¥—ã, —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã

### üü† Mission-Critical Systems  

**–ù–µ–æ–±—Ö–æ–¥–∏–º—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏**

- **–ü—Ä–∏–º–µ—Ä—ã**: –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∫–æ—Å–º–∏—á–µ—Å–∫–∏—Ö –∞–ø–ø–∞—Ä–∞—Ç–æ–≤, —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- **–ö–æ–Ω—Ç—É—Ä—ã**: 4-6 —Å—Ä–µ–¥
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ pre-production –∏ disaster recovery —Å—Ä–µ–¥—ã

### üü° Business-Critical Systems

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –∫–ª—é—á–µ–≤—ã–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã**

- **–ü—Ä–∏–º–µ—Ä—ã**: –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ –ø–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã, —Ç–æ—Ä–≥–æ–≤—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã, ERP-—Ä–µ—à–µ–Ω–∏—è
- **–ö–æ–Ω—Ç—É—Ä—ã**: 3-4 —Å—Ä–µ–¥—ã
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ä–∏—Å–∫–æ–≤ –∏ —Ä–µ–ø—É—Ç–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —É—â–µ—Ä–±–∞

### üü¢ Non-Critical Systems

**–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**

- **–ü—Ä–∏–º–µ—Ä—ã**: –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –ø–æ—Ä—Ç–∞–ª—ã, –æ—Ñ–∏—Å–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
- **–ö–æ–Ω—Ç—É—Ä—ã**: 2-3 —Å—Ä–µ–¥—ã
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å–≤—è–∑–∫–∞ dev ‚Üí test ‚Üí prod

### üìä –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ–ª—å

<div style="margin: 60px 0; padding: 30px 0; text-align: center;">
$$N = \left\lceil \log_2 \left( C^{w_C} \times R^{w_R} \times I^{w_I} \right) \right\rceil + k$$
</div>


–≥–¥–µ:
- $C$ ‚Äî –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å (1‚Äì10)
- $R$ ‚Äî –£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞ (1‚Äì10)
- $I$ ‚Äî –°–ª–æ–∂–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (1‚Äì10)
- $w_C, w_R, w_I$ ‚Äî –≤–µ—Å–∞ –≤–ª–∏—è–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤ (—á–∏—Å–ª–∞ $\geq 0$)
- $k$ ‚Äî –±–∞–∑–æ–≤–æ–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–Ω—Ç—É—Ä–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2)
- $\lceil \cdot \rceil$ ‚Äî —Ñ—É–Ω–∫—Ü–∏—è –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –≤–≤–µ—Ä—Ö

## –ü—Ä–∏–º–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

- $w_C = 1.2$ ‚Äî –≤–µ—Å –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏ (—á—É—Ç—å –≤—ã—à–µ)
- $w_R = 1.0$ ‚Äî –≤–µ—Å —Ä–∏—Å–∫–∞
- $w_I = 0.8$ ‚Äî –≤–µ—Å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (—á—É—Ç—å –Ω–∏–∂–µ)
- $k = 2$ ‚Äî –±–∞–∑–æ–≤–æ–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–Ω—Ç—É—Ä–æ–≤
---

## üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

### üèóÔ∏è –ë–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å (3 –∫–æ–Ω—Ç—É—Ä–∞)

```mermaid
graph LR
    Dev[üîß Development] --> Test[üß™ Testing/QA]
    Test --> Prod[üåê Production]
```

**Development Environment**

- –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø–µ—Ä–≤–∏—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- –ë—ã—Å—Ç—Ä–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è –∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏

**Testing/QA Environment**

- –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ prod-like —É—Å–ª–æ–≤–∏—è—Ö
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –∏ E2E —Ç–µ—Å—Ç—ã
- Performance –∏ security —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**Production Environment**

- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- –°—Ç—Ä–æ–≥–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –∏–∑–º–µ–Ω–µ–Ω–∏–π
- Monitoring –∏ alerting

### üöÄ –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å (5+ –∫–æ–Ω—Ç—É—Ä–æ–≤)

```mermaid
graph LR
    Dev[üîß Dev] --> Test[üß™ Test]
    Test --> Stage[üé≠ Staging]
    Stage --> Canary[üê§ Canary]
    Canary --> Prod[üåê Production]
    Prod --> DR[‚ö° DR]
```

**Staging Environment**

- –¢–æ—á–Ω–∞—è –∫–æ–ø–∏—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
- Final validation –ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º
- Business acceptance testing

**Canary Environment**

- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏–π
- A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è blast radius

**Disaster Recovery Environment**

- –†–µ–∑–µ—Ä–≤–Ω–∞—è —Å—Ä–µ–¥–∞ –¥–ª—è –∞–≤–∞—Ä–∏–π–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- –†–µ–≥—É–ª—è—Ä–Ω—ã–µ DR drills
- Cross-region replication

---

## üåê –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏–∑–æ–ª—è—Ü–∏–∏ –∫–æ–Ω—Ç—É—Ä–æ–≤

### üîÑ –£—Ä–æ–≤–Ω–∏ –∏–∑–æ–ª—è—Ü–∏–∏

#### 1. –õ–æ–≥–∏—á–µ—Å–∫–∞—è –∏–∑–æ–ª—è—Ü–∏—è

```yaml
# Kubernetes Namespaces
apiVersion: v1
kind: Namespace
metadata:
  name: ${ENVIRONMENT}-${APPLICATION}
  labels:
    environment: ${ENVIRONMENT}
    criticality: ${CRITICALITY_LEVEL}
```

#### 2. –°–µ—Ç–µ–≤–∞—è –∏–∑–æ–ª—è—Ü–∏—è

```yaml
# Network Policies
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: ${ENVIRONMENT}-isolation
spec:
  podSelector:
    matchLabels:
      environment: ${ENVIRONMENT}
  policyTypes:
  - Ingress
  - Egress
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          environment: ${ENVIRONMENT}
```

#### 3. –§–∏–∑–∏—á–µ—Å–∫–∞—è –∏–∑–æ–ª—è—Ü–∏—è

- –û—Ç–¥–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Ç–µ—Ä—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å—Ä–µ–¥
- Cross-region deployment –¥–ª—è DR
- Dedicated hardware –¥–ª—è safety-critical —Å–∏—Å—Ç–µ–º

### üõ°Ô∏è –ü—Ä–∏–Ω—Ü–∏–ø—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∏–∑–æ–ª—è—Ü–∏–∏

**Defense in Depth**

- –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∑–∞—â–∏—Ç–∞
- –ö–∞–∂–¥—ã–π –∫–æ–Ω—Ç—É—Ä –∫–∞–∫ security barrier
- Fail-safe mechanisms

**Least Privilege**

- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞
- Role-based access control
- Regular access reviews

**Zero Trust Architecture**

- "Never trust, always verify"
- Mutual TLS –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
- Continuous authentication

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ DNS-–∑–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

### üåê DNS —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–ª—è –∫–æ–Ω—Ç—É—Ä–æ–≤

#### Split-Horizon DNS

```bash
# –í–Ω–µ—à–Ω—è—è –∑–æ–Ω–∞ (–ø—É–±–ª–∏—á–Ω–∞—è)
# /etc/bind/zones/db.company.com
$ORIGIN company.com.
$TTL 300
@   IN  SOA ns1.company.com. admin.company.com. (
        2025061001  ; Serial
        3600        ; Refresh
        1800        ; Retry
        604800      ; Expire
        300         ; Minimum TTL
    )

@           IN  NS      ns1.company.com.
@           IN  NS      ns2.company.com.
www         IN  A       ${PUBLIC_IP}
api         IN  A       ${PUBLIC_API_IP}

# –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –∑–æ–Ω–∞ (–ø—Ä–∏–≤–∞—Ç–Ω–∞—è)
# /etc/bind/zones/db.internal.company.com
$ORIGIN internal.company.com.
dev-api     IN  A       ${DEV_INTERNAL_IP}
test-api    IN  A       ${TEST_INTERNAL_IP}
staging-api IN  A       ${STAGING_INTERNAL_IP}
```

#### –°—Ö–µ–º—ã –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è –ø–æ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏

**–î–ª—è –º–∞–ª—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π:**

```
dev-${SERVICE}.${COMPANY}.com
test-${SERVICE}.${COMPANY}.com
staging-${SERVICE}.${COMPANY}.com
${SERVICE}.${COMPANY}.com  # Production
```

**–î–ª—è –∫—Ä—É–ø–Ω—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π:**

```
${SERVICE}.${ENVIRONMENT}.${TEAM}.${REGION}.${COMPANY}.com
```

### üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ DNS

**DNSSEC Implementation**

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π DNSSEC
dnssec-keygen -a RSASHA256 -b 2048 -n ZONE company.com
dnssec-keygen -a RSASHA256 -b 2048 -n ZONE -f KSK company.com

# –ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ –∑–æ–Ω—ã
dnssec-signzone -o company.com -k Kcompany.com.+008+${KSK_ID} \
    db.company.com Kcompany.com.+008+${ZSK_ID}
```

**DNS Filtering**

```yaml
# CoreDNS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
apiVersion: v1
kind: ConfigMap
metadata:
  name: coredns
data:
  Corefile: |
    .:53 {
        errors
        health
        kubernetes cluster.local in-addr.arpa ip6.arpa {
            pods insecure
            fallthrough in-addr.arpa ip6.arpa
        }
        forward . /etc/resolv.conf
        cache 30
        loop
        reload
        loadbalance
        # –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –æ–ø–∞—Å–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤
        block {
            ${BLOCKED_DOMAINS_LIST}
        }
    }
```

---

## ‚ö° –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ 2025

### üîÑ GitOps –∫–∞–∫ –Ω–æ–≤—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç

**ArgoCD Configuration**

```yaml
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: ${APPLICATION_NAME}-${ENVIRONMENT}
  namespace: argocd
spec:
  project: ${PROJECT_NAME}
  source:
    repoURL: ${GIT_REPO_URL}
    targetRevision: ${ENVIRONMENT_BRANCH}
    path: manifests/${ENVIRONMENT}
  destination:
    server: ${CLUSTER_URL}
    namespace: ${NAMESPACE}
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    retry:
      limit: 5
      backoff:
        duration: 5s
        factor: 2
        maxDuration: 3m
```

**Flux v2 Multi-Environment Setup**

```yaml
apiVersion: source.toolkit.fluxcd.io/v1beta2
kind: GitRepository
metadata:
  name: ${APP_NAME}
  namespace: flux-system
spec:
  interval: 1m
  ref:
    branch: ${ENVIRONMENT}
  url: ${GIT_REPO_URL}
---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: ${APP_NAME}-${ENVIRONMENT}
  namespace: flux-system
spec:
  interval: 5m
  path: "./deploy/${ENVIRONMENT}"
  prune: true
  sourceRef:
    kind: GitRepository
    name: ${APP_NAME}
  healthChecks:
    - apiVersion: apps/v1
      kind: Deployment
      name: ${APP_NAME}
      namespace: ${NAMESPACE}
```

### üèóÔ∏è Infrastructure as Code Evolution

**Pulumi —Å TypeScript**

```typescript
import * as k8s from "@pulumi/kubernetes";
import * as pulumi from "@pulumi/pulumi";

const environments = ["dev", "test", "staging", "prod"];
const criticality = pulumi.getStack() === "prod" ? "high" : "medium";

environments.forEach(env => {
    const namespace = new k8s.core.v1.Namespace(`${env}-namespace`, {
        metadata: {
            name: `${env}-${pulumi.getProject()}`,
            labels: {
                environment: env,
                criticality: criticality,
                "managed-by": "pulumi"
            }
        }
    });

    // Network Policy –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏
    const networkPolicy = new k8s.networking.v1.NetworkPolicy(
        `${env}-network-policy`,
        {
            metadata: {
                name: `${env}-isolation`,
                namespace: namespace.metadata.name
            },
            spec: {
                podSelector: {
                    matchLabels: {
                        environment: env
                    }
                },
                policyTypes: ["Ingress", "Egress"],
                ingress: [{
                    from: [{
                        namespaceSelector: {
                            matchLabels: {
                                environment: env
                            }
                        }
                    }]
                }]
            }
        }
    );
});
```

### üï∏Ô∏è Service Mesh –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–∏—Å—Ç–µ–º

**Istio Ambient Mode**

```yaml
apiVersion: install.istio.io/v1alpha1
kind: IstioOperator
metadata:
  name: ambient
spec:
  values:
    pilot:
      env:
        PILOT_ENABLE_AMBIENT: true
  components:
    cni:
      enabled: true
---
apiVersion: v1
kind: Namespace
metadata:
  name: ${ENVIRONMENT}
  labels:
    istio.io/dataplane-mode: ambient
```

**Cilium Service Mesh**

```yaml
apiVersion: cilium.io/v2
kind: CiliumNetworkPolicy
metadata:
  name: ${ENVIRONMENT}-l7-policy
spec:
  endpointSelector:
    matchLabels:
      environment: ${ENVIRONMENT}
  ingress:
  - fromEndpoints:
    - matchLabels:
        environment: ${ENVIRONMENT}
    toPorts:
    - ports:
      - port: "8080"
        protocol: TCP
      rules:
        http:
        - method: "GET"
          path: "/health"
        - method: "POST"
          path: "/api/v1/.*"
```

### üå™Ô∏è Chaos Engineering

**Chaos Mesh –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏**

```yaml
apiVersion: chaos-mesh.org/v1alpha1
kind: NetworkChaos
metadata:
  name: ${ENVIRONMENT}-network-partition
spec:
  action: partition
  mode: fixed
  value: "1"
  duration: "30s"
  selector:
    namespaces:
      - ${ENVIRONMENT}
    labelSelectors:
      "app": "${APPLICATION_NAME}"
  direction: both
  target:
    mode: fixed
    value: "1"
    selector:
      namespaces:
        - ${ENVIRONMENT}
      labelSelectors:
        "app": "${DATABASE_NAME}"
```

---

## üõ†Ô∏è –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### üìä –ú–∞—Ç—Ä–∏—Ü–∞ –≤—ã–±–æ—Ä–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

| –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å | –ö–æ–Ω—Ç—É—Ä—ã | –í—Ä–µ–º—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è | SLA | –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è |
|------------|---------|-------------------|-----|---------------|
| Non-Critical | 2-3 | –ú–∏–Ω—É—Ç—ã | 95% | –ü–æ–ª–Ω–∞—è |
| Business-Critical | 3-4 | –ß–∞—Å—ã | 99% | –° approval gates |
| Mission-Critical | 4-6 | –î–Ω–∏ | 99.9% | –° compliance –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ |
| Safety-Critical | 6+ | –ù–µ–¥–µ–ª–∏ | 99.99% | –° certification |

### üîß –®–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç—É—Ä–æ–≤

```yaml
# environments/base/kustomization.yaml
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - deployment.yaml
  - service.yaml
  - ingress.yaml

configMapGenerator:
  - name: app-config
    literals:
      - ENVIRONMENT=${ENVIRONMENT}
      - LOG_LEVEL=${LOG_LEVEL}
      - DATABASE_URL=${DATABASE_URL}

secretGenerator:
  - name: app-secrets
    literals:
      - API_KEY=${API_KEY}
      - DATABASE_PASSWORD=${DATABASE_PASSWORD}

# environments/dev/kustomization.yaml
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - ../base

patchesStrategicMerge:
  - replica-count.yaml

configMapGenerator:
  - name: app-config
    behavior: merge
    literals:
      - ENVIRONMENT=development
      - LOG_LEVEL=debug
      - DATABASE_URL=postgresql://dev-db:5432/myapp

# environments/prod/kustomization.yaml
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - ../base

patchesStrategicMerge:
  - replica-count.yaml
  - resources.yaml

configMapGenerator:
  - name: app-config
    behavior: merge
    literals:
      - ENVIRONMENT=production
      - LOG_LEVEL=info
      - DATABASE_URL=postgresql://prod-db:5432/myapp
```

### üîê –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**Falco Rules –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**

```yaml
# /etc/falco/falco_rules.yaml
- rule: Unauthorized Container Access
  desc: Detect unauthorized access to sensitive containers
  condition: >
    k8s_audit and
    ka.target.namespace in (production, staging) and
    ka.verb in (create, update, delete) and
    not ka.user.name in (system:serviceaccount:kube-system:deployment-controller)
  output: >
    Unauthorized access to critical environment
    (user=%ka.user.name verb=%ka.verb resource=%ka.target.resource
    namespace=%ka.target.namespace)
  priority: WARNING

- rule: Privilege Escalation Attempt
  desc: Detect attempts to escalate privileges
  condition: >
    spawned_process and
    proc.name in (sudo, su, passwd) and
    container.image.repository in (${CRITICAL_IMAGES})
  output: >
    Privilege escalation attempt in critical container
    (image=%container.image.repository command=%proc.cmdline)
  priority: CRITICAL
```

---

## üö® Troubleshooting

### 1. üîß –ü—Ä–æ–±–ª–µ–º—ã —Å –∏–∑–æ–ª—è—Ü–∏–µ–π —Å–µ—Ç–µ–π

**–°–∏–º–ø—Ç–æ–º—ã**: –°–µ—Ä–≤–∏—Å—ã –Ω–µ –º–æ–≥—É—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –º–µ–∂–¥—É –∫–æ–Ω—Ç—É—Ä–∞–º–∏

```bash
# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
kubectl get networkpolicy -A
kubectl describe networkpolicy ${POLICY_NAME} -n ${NAMESPACE}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–Ω–æ—Å—Ç–∏
kubectl exec -it ${POD_NAME} -n ${NAMESPACE} -- nslookup ${SERVICE_NAME}
kubectl exec -it ${POD_NAME} -n ${NAMESPACE} -- telnet ${SERVICE_IP} ${PORT}

# –õ–æ–≥ –∞–Ω–∞–ª–∏–∑
kubectl logs -l app=${APP_NAME} -n ${NAMESPACE} --tail=100
```

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ NetworkPolicy –∏ DNS —Ä–µ–∑–æ–ª—é—Ü–∏—é

### 2. üîÑ –ü—Ä–æ–±–ª–µ–º—ã —Å GitOps —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π

**–°–∏–º–ø—Ç–æ–º—ã**: ArgoCD –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
argocd app get ${APP_NAME}
argocd app sync ${APP_NAME} --force

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
argocd repo list
argocd repo get ${REPO_URL}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
kubectl logs -n argocd -l app.kubernetes.io/name=argocd-server
```

**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ credentials –∏ branch permissions

### 3. üîí –ü—Ä–æ–±–ª–µ–º—ã —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ —Å–µ–∫—Ä–µ—Ç–∞–º

**–°–∏–º–ø—Ç–æ–º—ã**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ –º–æ–≥—É—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–µ–∫—Ä–µ—Ç–∞–º

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤
kubectl get secrets -n ${NAMESPACE}
kubectl describe secret ${SECRET_NAME} -n ${NAMESPACE}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ RBAC
kubectl auth can-i get secrets --as=system:serviceaccount:${NAMESPACE}:${SERVICE_ACCOUNT}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ External Secrets Operator
kubectl get secretstore -n ${NAMESPACE}
kubectl logs -n external-secrets-system -l app.kubernetes.io/name=external-secrets
```

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ ServiceAccount permissions –∏ External Secrets –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

### 4. üåê DNS —Ä–µ–∑–æ–ª—é—Ü–∏—è –º–µ–∂–¥—É –∫–æ–Ω—Ç—É—Ä–∞–º–∏

**–°–∏–º–ø—Ç–æ–º—ã**: –°–µ—Ä–≤–∏—Å—ã –Ω–µ –º–æ–≥—É—Ç –Ω–∞–π—Ç–∏ –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –ø–æ DNS

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ CoreDNS
kubectl get configmap coredns -n kube-system -o yaml
kubectl logs -n kube-system -l k8s-app=kube-dns

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ DNS
kubectl run dns-test --image=busybox --rm -it -- nslookup ${SERVICE_NAME}.${NAMESPACE}.svc.cluster.local

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Service Discovery
kubectl get services -A | grep ${SERVICE_NAME}
```

**–†–µ—à–µ–Ω–∏–µ**: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ DNS –ø—Ä–∞–≤–∏–ª–∞ –∏ Service endpoints

### 5. üîß –ü—Ä–æ–±–ª–µ–º—ã —Å —Ä–µ—Å—É—Ä—Å–∞–º–∏ –∏ –ª–∏–º–∏—Ç–∞–º–∏

**–°–∏–º–ø—Ç–æ–º—ã**: –ü–æ–¥—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∏–ª–∏ –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è —Å –æ—à–∏–±–∫–∞–º–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
kubectl top nodes
kubectl top pods -n ${NAMESPACE}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤
kubectl describe limitrange -n ${NAMESPACE}
kubectl describe resourcequota -n ${NAMESPACE}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–±—ã—Ç–∏–π
kubectl get events -n ${NAMESPACE} --sort-by='.lastTimestamp'
```

**–†–µ—à–µ–Ω–∏–µ**: –£–≤–µ–ª–∏—á—å—Ç–µ –ª–∏–º–∏—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤ –∏–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ

### 6. üö® –ü—Ä–æ–±–ª–µ–º—ã —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –∏ –∞–ª–µ—Ä—Ç–∞–º–∏

**–°–∏–º–ø—Ç–æ–º—ã**: –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –º–µ—Ç—Ä–∏–∫–∏ –∏–ª–∏ –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–µ –∞–ª–µ—Ä—Ç—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ Prometheus
kubectl get prometheus -A
kubectl logs -n monitoring -l app.kubernetes.io/name=prometheus

# –ü—Ä–æ–≤–µ—Ä–∫–∞ ServiceMonitor
kubectl get servicemonitor -n ${NAMESPACE}
kubectl describe servicemonitor ${SERVICE_MONITOR_NAME} -n ${NAMESPACE}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ AlertManager
kubectl logs -n monitoring -l app.kubernetes.io/name=alertmanager
```

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é ServiceMonitor –∏ AlertManager rules

### 7. üîÑ –ü—Ä–æ–±–ª–µ–º—ã —Å Continuous Deployment

**–°–∏–º–ø—Ç–æ–º—ã**: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ Tekton Pipelines
kubectl get pipelineruns -A
kubectl describe pipelinerun ${PIPELINE_RUN_NAME}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Flux/ArgoCD
kubectl logs -n flux-system -l app=source-controller
kubectl logs -n argocd -l app.kubernetes.io/name=argocd-application-controller

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Webhook
kubectl get validatingwebhookconfigurations
kubectl get mutatingwebhookconfigurations
```

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ pipeline –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏ webhook endpoints

---

## üîç –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∏

### ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

- [ ] –û–ø—Ä–µ–¥–µ–ª–µ–Ω —É—Ä–æ–≤–µ–Ω—å –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã —Å–æ–≥–ª–∞—Å–Ω–æ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
- [ ] –í—ã–±—Ä–∞–Ω–æ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–Ω—Ç—É—Ä–æ–≤ –¥–ª—è —É—Ä–æ–≤–Ω—è –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏
- [ ] –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∫–∞–∂–¥–æ–º—É –∫–æ–Ω—Ç—É—Ä—É
- [ ] –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –º–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞ –∏ SLA –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç—É—Ä–∞
- [ ] –°–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è rollback –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç—É—Ä–∞

### ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∏–∑–æ–ª—è—Ü–∏—è

- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Å–µ—Ç–µ–≤–∞—è –∏–∑–æ–ª—è—Ü–∏—è –º–µ–∂–¥—É –∫–æ–Ω—Ç—É—Ä–∞–º–∏ (NetworkPolicies)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø—Ä–∏–Ω—Ü–∏–ø least privilege –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –æ—Ç–¥–µ–ª—å–Ω—ã–µ DNS –∑–æ–Ω—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ç—É—Ä–æ–≤
- [ ] –í–Ω–µ–¥—Ä–µ–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–∞–º–∏ (Vault/External Secrets)
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (Falco/OPA Gatekeeper)

### ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∏ CI/CD

- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω GitOps workflow (ArgoCD/Flux)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω Infrastructure as Code (Terraform/Pulumi)
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç—É—Ä–∞
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã approval gates –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∫–æ–Ω—Ç—É—Ä–æ–≤

### ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ Observability

- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫ (Prometheus/Grafana)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (ELK/Loki)
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ (Jaeger/Zipkin)
- [ ] –°–æ–∑–¥–∞–Ω—ã dashboard'—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç—É—Ä–∞
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∞–ª–µ—Ä—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫

### ‚úÖ Disaster Recovery –∏ Business Continuity

- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω disaster recovery –∫–æ–Ω—Ç—É—Ä
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- [ ] –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã runbook'–∏ –¥–ª—è –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Ä–µ–≥–∏–æ–Ω–∞–º–∏

### ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –ø—Ä–æ—Ü–µ—Å—Å—ã

- [ ] –°–æ–∑–¥–∞–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
- [ ] –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–æ—Ü–µ–¥—É—Ä—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- [ ] –°–æ–∑–¥–∞–Ω—ã runbook'–∏ –¥–ª—è —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–æ—Ü–µ—Å—Å code review –∏ approval
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏

---

## üìù –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä

### üéØ –°—Ü–µ–Ω–∞—Ä–∏–π: E-commerce –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Å—Ä–µ–¥–Ω–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞

**–ö–æ–Ω—Ç–µ–∫—Å—Ç**: –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω —Å 100K+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—â–∏–π 1000+ –∑–∞–∫–∞–∑–æ–≤ –≤ –¥–µ–Ω—å. –ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ Business-Critical —Å–∏—Å—Ç–µ–º–∞.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**:

- –í—ã—Å–æ–∫–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (99.9% SLA)
- –ë—ã—Å—Ç—Ä–æ–µ –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ (< 200ms)
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (PCI DSS)
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±—ã—Å—Ç—Ä–æ–≥–æ rollback

### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ç—É—Ä–æ–≤

```mermaid
graph TB
    Dev[üîß Development<br/>–ë—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞] --> Test[üß™ Testing<br/>–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã]
    Test --> Stage[üé≠ Staging<br/>–ü–æ–ª–Ω–∞—è –∫–æ–ø–∏—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞]
    Stage --> Prod[üåê Production<br/>–ñ–∏–≤–∞—è —Å–∏—Å—Ç–µ–º–∞]
    Prod --> DR[‚ö° Disaster Recovery<br/>–†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è]
```

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
ecommerce-platform/
‚îú‚îÄ‚îÄ infrastructure/
‚îÇ   ‚îú‚îÄ‚îÄ terraform/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ environments/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dev/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ staging/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ prod/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ modules/
‚îÇ   ‚îî‚îÄ‚îÄ k8s/
‚îÇ       ‚îú‚îÄ‚îÄ base/
‚îÇ       ‚îî‚îÄ‚îÄ environments/
‚îú‚îÄ‚îÄ applications/
‚îÇ   ‚îú‚îÄ‚îÄ web-frontend/
‚îÇ   ‚îú‚îÄ‚îÄ api-gateway/
‚îÇ   ‚îú‚îÄ‚îÄ user-service/
‚îÇ   ‚îú‚îÄ‚îÄ product-service/
‚îÇ   ‚îú‚îÄ‚îÄ order-service/
‚îÇ   ‚îî‚îÄ‚îÄ payment-service/
‚îî‚îÄ‚îÄ gitops/
    ‚îú‚îÄ‚îÄ dev/
    ‚îú‚îÄ‚îÄ test/
    ‚îú‚îÄ‚îÄ staging/
    ‚îî‚îÄ‚îÄ prod/
```

### üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–∞–∑–æ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**Terraform Configuration**

```hcl
# infrastructure/terraform/environments/prod/main.tf
terraform {
  required_providers {
    aws = {
      source  = "hashicorp/aws"
      version = "~> 5.0"
    }
    kubernetes = {
      source  = "hashicorp/kubernetes"
      version = "~> 2.0"
    }
  }
}

# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ç—É—Ä–æ–≤
variable "environment" {
  description = "Environment name"
  type        = string
  default     = "prod"
}

variable "cluster_name" {
  description = "EKS cluster name"
  type        = string
  default     = "ecommerce-prod"
}

variable "node_groups" {
  description = "EKS node groups configuration"
  type = map(object({
    instance_types = list(string)
    desired_size   = number
    max_size      = number
    min_size      = number
  }))
  default = {
    critical = {
      instance_types = ["m5.large", "m5.xlarge"]
      desired_size   = 3
      max_size      = 10
      min_size      = 3
    }
    general = {
      instance_types = ["t3.medium", "t3.large"]
      desired_size   = 2
      max_size      = 20
      min_size      = 2
    }
  }
}

# EKS Cluster
module "eks" {
  source = "../../modules/eks"
  
  cluster_name    = var.cluster_name
  environment     = var.environment
  node_groups     = var.node_groups
  
  # –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
  enable_irsa                = true
  enable_cluster_autoscaler  = true
  enable_aws_load_balancer_controller = true
  
  tags = {
    Environment = var.environment
    Project     = "ecommerce-platform"
    Criticality = "business-critical"
  }
}

# RDS –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç—É—Ä–∞
module "database" {
  source = "../../modules/rds"
  
  environment = var.environment
  instance_class = var.environment == "prod" ? "db.r5.xlarge" : "db.t3.medium"
  multi_az = var.environment == "prod" ? true : false
  backup_retention_period = var.environment == "prod" ? 7 : 1
  
  # –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
  storage_encrypted = var.environment == "prod" ? true : false
  
  tags = {
    Environment = var.environment
    Criticality = "high"
  }
}

# Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
module "redis" {
  source = "../../modules/elasticache"
  
  environment = var.environment
  node_type = var.environment == "prod" ? "cache.r6g.large" : "cache.t3.micro"
  num_cache_clusters = var.environment == "prod" ? 3 : 1
  
  tags = {
    Environment = var.environment
    Service     = "cache"
  }
}
```

### üê≥ Kubernetes –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤

**User Service Configuration**

```yaml
# applications/user-service/k8s/base/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: user-service
  labels:
    app: user-service
    version: v1
spec:
  replicas: 2  # –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ kustomization
  selector:
    matchLabels:
      app: user-service
  template:
    metadata:
      labels:
        app: user-service
        version: v1
    spec:
      serviceAccountName: user-service
      containers:
      - name: user-service
        image: ecommerce/user-service:latest  # –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ kustomization
        ports:
        - containerPort: 8080
        env:
        - name: ENVIRONMENT
          valueFrom:
            configMapKeyRef:
              name: app-config
              key: ENVIRONMENT
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              name: database-secret
              key: url
        - name: REDIS_URL
          valueFrom:
            secretKeyRef:
              name: redis-secret
              key: url
        resources:
          requests:
            memory: "128Mi"
            cpu: "100m"
          limits:
            memory: "512Mi"
            cpu: "500m"
        livenessProbe:
          httpGet:
            path: /health/live
            port: 8080
          initialDelaySeconds: 30
          periodSeconds: 10
        readinessProbe:
          httpGet:
            path: /health/ready
            port: 8080
          initialDelaySeconds: 5
          periodSeconds: 5
        securityContext:
          runAsNonRoot: true
          runAsUser: 1000
          allowPrivilegeEscalation: false
          readOnlyRootFilesystem: true
          capabilities:
            drop:
            - ALL
```

**Kustomization –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞**

```yaml
# gitops/prod/user-service/kustomization.yaml
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: ecommerce-prod

resources:
- ../../../applications/user-service/k8s/base

images:
- name: ecommerce/user-service
  newTag: v1.2.3  # –°–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

replicas:
- name: user-service
  count: 5  # –ë–æ–ª—å—à–µ —Ä–µ–ø–ª–∏–∫ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

patchesStrategicMerge:
- resources-patch.yaml

configMapGenerator:
- name: app-config
  literals:
  - ENVIRONMENT=production
  - LOG_LEVEL=info
  - METRICS_ENABLED=true
  - TRACING_ENABLED=true

# gitops/prod/user-service/resources-patch.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: user-service
spec:
  template:
    spec:
      containers:
      - name: user-service
        resources:
          requests:
            memory: "256Mi"
            cpu: "200m"
          limits:
            memory: "1Gi"
            cpu: "1000m"
```

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∏–∑–æ–ª—è—Ü–∏—è

**Network Policies**

```yaml
# gitops/prod/network-policies.yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: ecommerce-prod-isolation
  namespace: ecommerce-prod
spec:
  podSelector: {}
  policyTypes:
  - Ingress
  - Egress
  ingress:
  # –†–∞–∑—Ä–µ—à–∞–µ–º —Ç—Ä–∞—Ñ–∏–∫ —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ namespace
  - from:
    - namespaceSelector:
        matchLabels:
          name: ecommerce-prod
  # –†–∞–∑—Ä–µ—à–∞–µ–º —Ç—Ä–∞—Ñ–∏–∫ –æ—Ç ingress controller
  - from:
    - namespaceSelector:
        matchLabels:
          name: ingress-nginx
  egress:
  # –†–∞–∑—Ä–µ—à–∞–µ–º DNS —Ä–µ–∑–æ–ª—é—Ü–∏—é
  - to: []
    ports:
    - protocol: UDP
      port: 53
  # –†–∞–∑—Ä–µ—à–∞–µ–º HTTPS –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API
  - to: []
    ports:
    - protocol: TCP
      port: 443
  # –†–∞–∑—Ä–µ—à–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –±–∞–∑–∞–º –¥–∞–Ω–Ω—ã—Ö
  - to:
    - namespaceSelector:
        matchLabels:
          name: databases
---
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: payment-service-strict
  namespace: ecommerce-prod
spec:
  podSelector:
    matchLabels:
      app: payment-service
  policyTypes:
  - Ingress
  - Egress
  ingress:
  # –¢–æ–ª—å–∫–æ order-service –º–æ–∂–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ payment-service
  - from:
    - podSelector:
        matchLabels:
          app: order-service
    ports:
    - protocol: TCP
      port: 8080
  egress:
  # –¢–æ–ª—å–∫–æ –∫ –≤–Ω–µ—à–Ω–∏–º –ø–ª–∞—Ç–µ–∂–Ω—ã–º API
  - to: []
    ports:
    - protocol: TCP
      port: 443
    # –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–æ–º–µ–Ω—ã –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
```

**Service Mesh —Å Istio**

```yaml
# gitops/prod/istio/virtual-service.yaml
apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: ecommerce-routing
  namespace: ecommerce-prod
spec:
  hosts:
  - ecommerce.company.com
  gateways:
  - ecommerce-gateway
  http:
  # Canary deployment –¥–ª—è –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏–π
  - match:
    - headers:
        canary:
          exact: "true"
    route:
    - destination:
        host: user-service
        subset: v2
      weight: 100
  # –û—Å–Ω–æ–≤–Ω–æ–π —Ç—Ä–∞—Ñ–∏–∫
  - route:
    - destination:
        host: user-service
        subset: v1
      weight: 95
    - destination:
        host: user-service
        subset: v2
      weight: 5
  fault:
    delay:
      percentage:
        value: 0.1
      fixedDelay: 5s
---
apiVersion: networking.istio.io/v1beta1
kind: DestinationRule
metadata:
  name: user-service
  namespace: ecommerce-prod
spec:
  host: user-service
  trafficPolicy:
    tls:
      mode: ISTIO_MUTUAL
  subsets:
  - name: v1
    labels:
      version: v1
  - name: v2
    labels:
      version: v2
```

### üîÑ GitOps —Å ArgoCD

**Application Set –¥–ª—è –≤—Å–µ—Ö –∫–æ–Ω—Ç—É—Ä–æ–≤**

```yaml
# gitops/applicationset.yaml
apiVersion: argoproj.io/v1alpha1
kind: ApplicationSet
metadata:
  name: ecommerce-platform
  namespace: argocd
spec:
  generators:
  - list:
      elements:
      - environment: dev
        cluster: https://dev.k8s.company.com
        namespace: ecommerce-dev
        repoRevision: develop
      - environment: test
        cluster: https://test.k8s.company.com
        namespace: ecommerce-test
        repoRevision: release
      - environment: staging
        cluster: https://staging.k8s.company.com
        namespace: ecommerce-staging
        repoRevision: main
      - environment: prod
        cluster: https://prod.k8s.company.com
        namespace: ecommerce-prod
        repoRevision: main
  template:
    metadata:
      name: 'ecommerce-{{environment}}'
    spec:
      project: ecommerce
      source:
        repoURL: https://github.com/company/ecommerce-gitops.git
        targetRevision: '{{repoRevision}}'
        path: '{{environment}}'
      destination:
        server: '{{cluster}}'
        namespace: '{{namespace}}'
      syncPolicy:
        automated:
          prune: true
          selfHeal: true
        syncOptions:
        - CreateNamespace=true
        retry:
          limit: 5
          backoff:
            duration: 5s
            factor: 2
            maxDuration: 3m
      ignoreDifferences:
      - group: apps
        kind: Deployment
        jsonPointers:
        - /spec/replicas
```

### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç–∏–Ω–≥

**Prometheus Rules**

```yaml
# monitoring/prometheus-rules.yaml
apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  name: ecommerce-alerts
  namespace: monitoring
spec:
  groups:
  - name: ecommerce.critical
    rules:
    - alert: HighErrorRate
      expr: |
        rate(http_requests_total{job="ecommerce", status=~"5.."}[5m]) /
        rate(http_requests_total{job="ecommerce"}[5m]) > 0.05
      for: 5m
      labels:
        severity: critical
        environment: "{{ $labels.environment }}"
      annotations:
        summary: "High error rate in {{ $labels.environment }}"
        description: "Error rate is {{ $value | humanizePercentage }} for {{ $labels.service }}"
    
    - alert: DatabaseConnectionFailure
      expr: up{job="postgresql"} == 0
      for: 2m
      labels:
        severity: critical
      annotations:
        summary: "Database connection failed"
        description: "PostgreSQL database is down in {{ $labels.environment }}"
    
    - alert: PaymentServiceDown
      expr: up{job="payment-service"} == 0
      for: 1m
      labels:
        severity: critical
      annotations:
        summary: "Payment service is down"
        description: "Critical payment service unavailable"
    
    - alert: HighLatency
      expr: |
        histogram_quantile(0.95,
          rate(http_request_duration_seconds_bucket{job="ecommerce"}[5m])
        ) > 0.5
      for: 10m
      labels:
        severity: warning
      annotations:
        summary: "High latency detected"
        description: "95th percentile latency is {{ $value }}s"
```

**Grafana Dashboard Configuration**

```json
{
  "dashboard": {
    "title": "E-commerce Platform - {{ environment }}",
    "panels": [
      {
        "title": "Request Rate",
        "type": "graph",
        "targets": [
          {
            "expr": "rate(http_requests_total{environment=\"{{ environment }}\"}[5m])",
            "legendFormat": "{{ service }}"
          }
        ]
      },
      {
        "title": "Error Rate",
        "type": "singlestat",
        "targets": [
          {
            "expr": "rate(http_requests_total{environment=\"{{ environment }}\", status=~\"5..\"}[5m]) / rate(http_requests_total{environment=\"{{ environment }}\"}[5m])",
            "legendFormat": "Error Rate"
          }
        ],
        "thresholds": "0.01,0.05"
      },
      {
        "title": "Database Connections",
        "type": "graph",
        "targets": [
          {
            "expr": "pg_stat_database_numbackends{environment=\"{{ environment }}\"}",
            "legendFormat": "{{ datname }}"
          }
        ]
      }
    ]
  }
}
```

### üöÄ CI/CD Pipeline

**GitHub Actions Workflow**

```yaml
# .github/workflows/deploy.yml
name: Deploy E-commerce Platform

on:
  push:
    branches: [main, develop, release/*]
  pull_request:
    branches: [main]

env:
  REGISTRY: ghcr.io
  IMAGE_NAME: ecommerce

jobs:
  determine-environment:
    runs-on: ubuntu-latest
    outputs:
      environment: ${{ steps.env.outputs.environment }}
      should_deploy: ${{ steps.env.outputs.should_deploy }}
    steps:
    - name: Determine environment
      id: env
      run: |
        if [[ "${{ github.ref }}" == "refs/heads/main" ]]; then
          echo "environment=prod" >> $GITHUB_OUTPUT
          echo "should_deploy=true" >> $GITHUB_OUTPUT
        elif [[ "${{ github.ref }}" == "refs/heads/develop" ]]; then
          echo "environment=dev" >> $GITHUB_OUTPUT
          echo "should_deploy=true" >> $GITHUB_OUTPUT
        elif [[ "${{ github.ref }}" == refs/heads/release/* ]]; then
          echo "environment=staging" >> $GITHUB_OUTPUT
          echo "should_deploy=true" >> $GITHUB_OUTPUT
        else
          echo "environment=test" >> $GITHUB_OUTPUT
          echo "should_deploy=false" >> $GITHUB_OUTPUT
        fi

  security-scan:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - name: Run Trivy vulnerability scanner
      uses: aquasecurity/trivy-action@master
      with:
        scan-type: 'fs'
        scan-ref: '.'
        format: 'sarif'
        output: 'trivy-results.sarif'
    - name: Upload Trivy scan results
      uses: github/codeql-action/upload-sarif@v2
      with:
        sarif_file: 'trivy-results.sarif'

  build-and-test:
    runs-on: ubuntu-latest
    needs: [determine-environment]
    strategy:
      matrix:
        service: [user-service, product-service, order-service, payment-service]
    steps:
    - uses: actions/checkout@v4
    
    - name: Set up Docker Buildx
      uses: docker/setup-buildx-action@v3
    
    - name: Log in to Container Registry
      uses: docker/login-action@v3
      with:
        registry: ${{ env.REGISTRY }}
        username: ${{ github.actor }}
        password: ${{ secrets.GITHUB_TOKEN }}
    
    - name: Build and push Docker image
      uses: docker/build-push-action@v5
      with:
        context: ./applications/${{ matrix.service }}
        push: true
        tags: |
          ${{ env.REGISTRY }}/${{ github.repository }}/${{ matrix.service }}:${{ github.sha }}
          ${{ env.REGISTRY }}/${{ github.repository }}/${{ matrix.service }}:latest
        cache-from: type=gha
        cache-to: type=gha,mode=max
    
    - name: Run unit tests
      run: |
        cd applications/${{ matrix.service }}
        make test
    
    - name: Run security scan on image
      uses: aquasecurity/trivy-action@master
      with:
        image-ref: ${{ env.REGISTRY }}/${{ github.repository }}/${{ matrix.service }}:${{ github.sha }}
        format: 'table'
        exit-code: '1'
        severity: 'CRITICAL,HIGH'

  deploy:
    runs-on: ubuntu-latest
    needs: [determine-environment, security-scan, build-and-test]
    if: needs.determine-environment.outputs.should_deploy == 'true'
    environment: ${{ needs.determine-environment.outputs.environment }}
    steps:
    - uses: actions/checkout@v4
      with:
        repository: company/ecommerce-gitops
        token: ${{ secrets.GITOPS_TOKEN }}
    
    - name: Update image tags
      run: |
        environment=${{ needs.determine-environment.outputs.environment }}
        cd $environment
        
        # Update all service images
        for service in user-service product-service order-service payment-service; do
          yq eval '.images[] |= select(.name == "ecommerce/'$service'").newTag = "'${{ github.sha }}'"' \
            -i $service/kustomization.yaml
        done
    
    - name: Commit and push changes
      run: |
        git config --local user.email "action@github.com"
        git config --local user.name "GitHub Action"
        git add .
        git commit -m "Update ${{ needs.determine-environment.outputs.environment }} to ${{ github.sha }}"
        git push
    
    - name: Wait for ArgoCD sync
      if: needs.determine-environment.outputs.environment == 'prod'
      run: |
        # –ñ–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
        timeout 300s bash -c 'until argocd app wait ecommerce-prod --sync; do sleep 10; done'

  post-deploy-tests:
    runs-on: ubuntu-latest
    needs: [determine-environment, deploy]
    if: needs.determine-environment.outputs.should_deploy == 'true'
    steps:
    - name: Run smoke tests
      run: |
        environment=${{ needs.determine-environment.outputs.environment }}
        base_url="https://ecommerce-$environment.company.com"
        
        # Health check
        curl -f "$base_url/health" || exit 1
        
        # Basic functionality test
        curl -f "$base_url/api/v1/products" || exit 1
        
    - name: Run load test
      if: needs.determine-environment.outputs.environment == 'staging'
      run: |
        # –ü—Ä–æ—Å—Ç–æ–π load test —Å k6
        docker run --rm -v $(pwd)/tests:/tests \
          grafana/k6 run /tests/load-test.js
```

### üìã –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

**–ú–µ—Ç—Ä–∏–∫–∏ –¥–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:**

- –í—Ä–µ–º—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è: 2-4 —á–∞—Å–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤: 15/–º–µ—Å—è—Ü
- –í—Ä–µ–º—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è: 45 –º–∏–Ω—É—Ç
- –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏: 60%

**–ú–µ—Ç—Ä–∏–∫–∏ –ø–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:**

- –í—Ä–µ–º—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è: 15 –º–∏–Ω—É—Ç
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤: 3/–º–µ—Å—è—Ü  
- –í—Ä–µ–º—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è: 10 –º–∏–Ω—É—Ç
- –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏: 85%

**–≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π —ç—Ñ—Ñ–µ–∫—Ç:**

- –°–Ω–∏–∂–µ–Ω–∏–µ –∑–∞—Ç—Ä–∞—Ç –Ω–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ: 80%
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–µ–≤: 75%
- –ü–æ–≤—ã—à–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π: 300%
- ROI –ø—Ä–æ–µ–∫—Ç–∞: 250% –∑–∞ –ø–µ—Ä–≤—ã–π –≥–æ–¥

---

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ç—É—Ä–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞ –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö IT-—Å–∏—Å—Ç–µ–º. –ú–∞—Ç—Ä–∏—Ü–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–Ω—Ç—É—Ä–æ–≤ –ø–æ–º–æ–≥–∞–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è, –∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ GitOps –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏ –¥–µ–ª–∞—é—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ–∂–Ω—ã–º–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞–º–∏ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º.

### üöÄ –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã

- **–ù–∞—á–∏–Ω–∞–π—Ç–µ —Å –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏** –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏ –≤–∞—à–∏—Ö —Å–∏—Å—Ç–µ–º
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ—ç—Ç–∞–ø–Ω—ã–π –ø–æ–¥—Ö–æ–¥** - –æ—Ç –ø—Ä–æ—Å—Ç–æ–≥–æ –∫ —Å–ª–æ–∂–Ω–æ–º—É
- **–ò–Ω–≤–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é** - –æ–Ω–∞ –æ–∫—É–ø–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å–Ω–∏–∂–µ–Ω–∏–µ —Ä–∏—Å–∫–æ–≤
- **–ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** - –∏–∑–æ–ª—è—Ü–∏—è –∫–æ–Ω—Ç—É—Ä–æ–≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞
- **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –≤—Å–µ** - observability –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–∞ —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞

–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –¥–∞–∂–µ –º–∞–ª—ã–º –∫–æ–º–∞–Ω–¥–∞–º —Å–æ–∑–¥–∞–≤–∞—Ç—å enterprise-grade –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã. –ì–ª–∞–≤–Ω–æ–µ - –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ü–µ–Ω–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã –∏ –≤—ã–±—Ä–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∫–æ–Ω—Ç—É—Ä–æ–≤.

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏**: –û—Ü–µ–Ω–∏—Ç–µ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å –≤–∞—à–∏—Ö —Å–∏—Å—Ç–µ–º, –≤—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–æ–π –º–∞—Ç—Ä–∏—Ü—ã –∏ –Ω–∞—á–Ω–∏—Ç–µ —Å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Å–∞–º—ã—Ö –ø—Ä–æ—Å—Ç—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤. –£—Å–ø–µ—Ö –≤ DevOps - —ç—Ç–æ –º–∞—Ä–∞—Ñ–æ–Ω, –∞ –Ω–µ —Å–ø—Ä–∏–Ω—Ç! üèÉ‚Äç‚ôÇÔ∏è

---

## üìû –ö–û–ù–¢–ê–ö–¢–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø

üì± **Telegram:** [@DevITWay](https://t.me/DevITWay)

üåê **–°–∞–π—Ç:** [devopsway.ru](https://devopsway.ru/)

---
