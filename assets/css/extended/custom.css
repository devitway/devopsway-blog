/* =============================================================================
   ОТЛАДКА: ОПРЕДЕЛЯЕМ КАКИЕ СЕЛЕКТОРЫ РЕАЛЬНО РАБОТАЮТ
   ============================================================================= */

/* Проверяем все возможные селекторы цветными рамками */
html[data-theme="dark"] .highlight { 
  border: 5px solid red !important; 
  background: #161b22 !important;
}

body[data-theme="dark"] .highlight { 
  border: 5px solid blue !important; 
  background: #161b22 !important;
}

[data-theme="dark"] .highlight { 
  border: 5px solid green !important; 
  background: #161b22 !important;
}

.dark .highlight { 
  border: 5px solid yellow !important; 
  background: #161b22 !important;
}

html.dark .highlight { 
  border: 5px solid purple !important; 
  background: #161b22 !important;
}

body.dark .highlight { 
  border: 5px solid orange !important; 
  background: #161b22 !important;
}

/* Дополнительные варианты */
html[theme="dark"] .highlight { 
  border: 5px solid pink !important; 
  background: #161b22 !important;
}

body[theme="dark"] .highlight { 
  border: 5px solid cyan !important; 
  background: #161b22 !important;
}

[theme="dark"] .highlight { 
  border: 5px solid lime !important; 
  background: #161b22 !important;
}

/* Проверяем селекторы по классам */
.theme-dark .highlight { 
  border: 5px solid brown !important; 
  background: #161b22 !important;
}

.dark-theme .highlight { 
  border: 5px solid gray !important; 
  background: #161b22 !important;
}

.dark-mode .highlight { 
  border: 5px solid navy !important; 
  background: #161b22 !important;
}

/* =============================================================================
   ПРИНУДИТЕЛЬНОЕ ИСПРАВЛЕНИЕ ДЛЯ ВСЕХ HIGHLIGHT БЛОКОВ
   ============================================================================= */

/* Ядерный вариант - перебиваем ВСЕ */
.highlight,
div.highlight,
figure.highlight,
pre.highlight {
  background: #161b22 !important;
  border: 1px solid #30363d !important;
  color: #e6edf3 !important;
}

.highlight pre,
div.highlight pre,
figure.highlight pre,
pre.highlight code {
  background: #161b22 !important;
  color: #e6edf3 !important;
}

.highlight code,
.highlight pre code,
div.highlight code,
figure.highlight code {
  background: transparent !important;
  color: #e6edf3 !important;
}

/* =============================================================================
   ИСПРАВЛЕНИЕ НОМЕРОВ СТРОК - ЯДЕРНЫЙ ВАРИАНТ
   ============================================================================= */

/* Убираем номера строк из DOM при копировании */
.highlight .lnt,
.highlight .lnl,
.lnt,
.lnl,
span.lnt,
span.lnl,
td.lnt,
td.lnl {
  position: absolute !important;
  left: -9999px !important;
  user-select: none !important;
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
  pointer-events: none !important;
  visibility: hidden !important;
  display: none !important;
}

/* Альтернативный способ - через CSS counters */
.highlight pre {
  counter-reset: line-number;
}

.highlight pre code {
  position: relative;
}

.highlight pre code::before {
  counter-increment: line-number;
  content: counter(line-number);
  position: absolute;
  left: -3rem;
  width: 2rem;
  text-align: right;
  color: #7d8590;
  background: #21262d;
  border-right: 1px solid #30363d;
  padding: 0 0.5rem;
  user-select: none !important;
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
}

/* =============================================================================
   ИНСТРУКЦИИ ПО ОТЛАДКЕ
   ============================================================================= */

/*
ИНСТРУКЦИИ:
1. Примените этот CSS
2. Переключитесь на темную тему
3. Посмотрите какого цвета рамка вокруг блоков кода
4. Сообщите цвет рамки - это покажет какой селектор работает

ЦВЕТА РАМОК:
- Красная: html[data-theme="dark"]
- Синяя: body[data-theme="dark"] 
- Зеленая: [data-theme="dark"]
- Желтая: .dark
- Фиолетовая: html.dark
- Оранжевая: body.dark
- Розовая: html[theme="dark"]
- Голубая: body[theme="dark"]
- Лаймовая: [theme="dark"]
- Коричневая: .theme-dark
- Серая: .dark-theme
- Темно-синяя: .dark-mode

Если НЕТ цветной рамки - значит тема использует другие селекторы!
*/